(this.webpackJsonpmy_hotel=this.webpackJsonpmy_hotel||[]).push([[0],{47:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var o,r,s,a,i,c,d=n(1),u=n(23),l=n.n(u),m=(n(47),"REQUEST_LOGIN_PENDING"),j="REQUEST_LOGIN_SUCCESS",b="REQUEST_LOGIN_FAILED",O="REQUEST_LOGOUT",p="REQUEST_ROOMS_PENDING",f="REQUEST_ROOMS_SUCCESS",h="REQUEST_ROOMS_FAILED",g="REQUEST_ADDROOMS_PENDING",x="REQUEST_ADDROOMS_SUCCESS",_="REQUEST_ADDROOMS_FAILED",v="REQUEST_DELETEROOMS_PENDING",E="REQUEST_DELETEROOMS_SUCCESS",y="REQUEST_DELETEROOMS_FAILED",S="REQUEST_GETROOMS_PENDING",R="REQUEST_GETROOMS_SUCCESS",T="REQUEST_GETROOMS_FAILED",N="UPDATE_TABLE_TRUE",L="UPDATE_TABLE_FALSE",U="https://hotelautomationapi20210407223324.azurewebsites.net/api",D={base:"local",authentificate:U+"/Users/authenticate",rooms:U+"/rooms",sendEmail:U+"/Email/send"},q=function(e){if(!e.ok)throw Error("Resposnse failed!");return e.json()},A=n(8),C=n(12),I=n(4),w=n(29),P=n(27),k=n(42),G=(n(53),n(54),n(2)),F=function(e){var t=Object(P.a)(),n=t.register,o=t.handleSubmit,r=t.formState.errors,s=Object(A.c)();return Object(G.jsx)("div",{children:Object(G.jsxs)("form",{className:"form-container",onSubmit:o((function(t){s(e.store.onRequestLogin(t))})),children:[Object(G.jsx)("h1",{className:"form__logintitle",children:"Login"}),Object(G.jsxs)("div",{className:"form__inputs",children:[Object(G.jsx)("input",Object(w.a)({type:"text",placeholder:"Email",name:"email"},n("email",{required:{value:!0,message:"Email is required!"},pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,message:"Email is invalid!"}}))),r.email&&Object(G.jsxs)("span",{children:[" ",r.email.message," "]}),Object(G.jsx)("input",Object(w.a)({type:"password",name:"password",placeholder:"Password"},n("password",{required:{value:!0,message:"Password is required!"},minLength:{value:6,message:"Password must be at least 6 characters long!"}}))),r.password&&Object(G.jsxs)("span",{children:[" ",r.password.message," "]})]}),Object(G.jsxs)("div",{children:[console.log(e.store.requestLogin.error),""!==e.store.requestLogin.error&&Object(G.jsx)("span",{className:"form__loginRequestError",children:e.store.requestLogin.error}),!0===e.store.requestLogin.isLoggingin&&Object(G.jsx)(k.a,{animation:"border",role:"status",varian:"danger",className:"form_loginSpinner"}),Object(G.jsx)("input",{type:"submit",className:"form__loginbutton",value:"Login"})]})]})})},B=(n(56),n(5)),M=(n(57),n(32)),Q=function(e){var t,n,o=Object(d.useState)([]),r=Object(B.a)(o,2),s=r[0],a=r[1],i=Object(A.c)(),c=Object(d.useState)(0),u=Object(B.a)(c,2),l=u[0],m=u[1];Object(d.useEffect)((function(){!function(){var t=[];Object.keys(e.room.facilities).map((function(n,o){return e.room.facilities[n]?t.push(n):""})),a(t)}()}),[e.store.updateTable.updateTable]);var j=Object(I.f)();return Object(G.jsxs)("tr",{className:"table__roomDataRow",children:[Object(G.jsx)("td",{children:e.room.number}),Object(G.jsx)("td",{children:s.map((function(e,t){return e+" "}))}),Object(G.jsx)("td",{children:e.room.beds}),Object(G.jsx)("td",{children:e.room.price}),Object(G.jsx)("td",{children:String(e.room.reserved)}),Object(G.jsx)("td",{children:null===(t=e.room.startDate)||void 0===t?void 0:t.substr(0,10)}),Object(G.jsx)("td",{children:null===(n=e.room.expirationDate)||void 0===n?void 0:n.substr(0,10)}),Object(G.jsx)("td",{children:Object(G.jsx)(M.b,{onClick:function(){return t=e.room.id,void j.push("/admin/rooms/edit/".concat(t));var t}})}),Object(G.jsx)("td",{children:Object(G.jsx)(M.a,{onClick:function(){return t=e.room.id,i(e.store.onRequestDeleteRoom(t)),alert("Room deleted!"),void m(l+1);var t}})})]})},z=(n(59),n.p+"static/media/notFound.f6ea13e5.svg"),J=function(e){var t=Object(A.c)(),n=Object(I.f)();Object(d.useEffect)((function(){t(e.store.onRequestRooms())}),[e.store.updateTable.updateTable]);var o=Object(d.useState)(""),r=Object(B.a)(o,2),s=r[0],a=r[1],i=e.store.requestRooms.rooms.filter((function(e){return e.number.includes(s)}));return Object(G.jsx)("div",{children:Object(G.jsxs)("table",{className:"table__container",children:[Object(G.jsxs)("thead",{children:[Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{colSpan:4,className:"table__header__td_search",children:Object(G.jsx)("input",{type:"search",placeholder:"search",className:"table__header__search",onChange:function(e){return a(e.target.value)}})}),Object(G.jsx)("td",{colSpan:5,className:"table__header__td_button",children:Object(G.jsx)("button",{className:"table__header__button",onClick:function(){n.push("/admin/rooms/add")},children:" Add room "})})]}),Object(G.jsxs)("tr",{className:"table__header",children:[Object(G.jsx)("th",{children:"Room number"}),Object(G.jsx)("th",{children:"Facilities"}),Object(G.jsx)("th",{children:"Beds"}),Object(G.jsx)("th",{children:"Price/day"}),Object(G.jsx)("th",{children:"Reserved"}),Object(G.jsx)("th",{children:"From date"}),Object(G.jsx)("th",{children:"To date"}),Object(G.jsx)("th",{colSpan:2,children:"Update and delete"})]})]}),Object(G.jsxs)("tbody",{children:[!1===e.reserved?i.map((function(t,n){return Object(G.jsx)(Q,{room:t,store:e.store},n)})):i.map((function(t,n){return!0===t.reserved?Object(G.jsx)(Q,{room:t,store:e.store},n):""})),0===i.length&&Object(G.jsx)("td",{colSpan:8,children:Object(G.jsxs)("div",{className:"table__notFoundDiv",children:[Object(G.jsx)("img",{src:z,className:"table__notFoundImage"}),Object(G.jsx)("p",{className:"table__notFoundText",children:" Room not found! "})]})})]})]})})},V=function(e){return Object(G.jsx)("div",{className:"rooms_continer",children:Object(G.jsx)(J,{store:e.store,reserved:!1})})},W=(n(60),n(17)),$=n(26),H=n(18),K=H.a.nav(o||(o=Object(W.a)(["\n  background: #000;\n  height: 80px;\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem calc((85vw - 1000px) / 2);\n  z-index: 10;\n"]))),X=Object(H.a)(C.b)(r||(r=Object(W.a)(["\n  color: #fff;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n  &.active {\n    color: #15cdfc;\n  }\n"]))),Y=Object(H.a)($.a)(s||(s=Object(W.a)(["\n  display: none;\n  color: #fff;\n  @media screen and (max-width: 768px) {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(-100%, 75%);\n    font-size: 1.8rem;\n    cursor: pointer;\n  }\n"]))),Z=H.a.div(a||(a=Object(W.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: -24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),ee=H.a.nav(i||(i=Object(W.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: 24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),te=Object(H.a)(C.b)(c||(c=Object(W.a)(["\n  border-radius: 4px;\n  background: #256ce1;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n \n  margin-left: 24px;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #fff;\n    color: #010606;\n  }\n"]))),ne=n.p+"static/media/logo.bc8abf65.svg",oe=function(e){var t=Object(A.c)();return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(K,{children:[Object(G.jsx)(X,{to:"/admin/rooms",children:Object(G.jsx)("img",{src:ne,alt:"logo"})}),Object(G.jsx)(Y,{}),Object(G.jsxs)(Z,{children:[Object(G.jsx)(X,{to:"/admin/rooms",children:"Rooms"}),Object(G.jsx)(X,{to:"/admin/reservations",children:"Reservations"}),Object(G.jsx)(X,{to:"/admin/sendemail",children:"Send promotion"})]}),Object(G.jsx)(ee,{children:Object(G.jsx)(te,{to:"/login",onClick:function(){return localStorage.removeItem("User_Login_Token"),void t(e.store.onRequestLogout())},children:"Log out"})})]})})},re=(n(62),n(33)),se=function(e){var t=Object(A.c)(),n=Object(I.f)(),o=Object(I.g)().id,r=Object(d.useState)(),s=Object(B.a)(r,2),a=s[0],i=s[1],c=Object(d.useState)(),u=Object(B.a)(c,2),l=u[0],m=u[1],j=Object(d.useState)(),b=Object(B.a)(j,2),O=b[0],p=b[1],f=Object(d.useState)(),h=Object(B.a)(f,2),g=h[0],x=h[1],_=Object(d.useState)([{name:"WIFI",id:1},{name:"AC",id:2},{name:"TV",id:3},{name:"NSR",id:4}]),v=Object(B.a)(_,2),E=v[0],y=(v[1],Object(d.useState)([])),S=Object(B.a)(y,2),R=S[0],T=S[1],N=Object(d.useState)([]),L=Object(B.a)(N,2),U=L[0],q=L[1],C=function(e){switch(e){case"wifi":return 1;case"ac":return 2;case"tv":return 3;case"nsr":return 4}};Object(d.useEffect)((function(){void 0!==o&&fetch(D.rooms+"/".concat(o),{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=Object.entries(e.facilities).filter((function(e){return!0===e[1]})).map((function(e){if(!0===e[1])return{name:e[0],id:C(e[0])}}));i(e.number),m(e.beds),p(e.price),T(t),x(e.reserved)}))}),[]);var w=function(e){T(e)},P=function(e){T(e)},k=function(){var e=[];return(a<0||a>999||void 0===a||0===a.length)&&e.push("Room number should be between 0 and 999!"),(l<0||l>5||void 0===l||0===l.length)&&e.push("Number of beds should be between 0 and 5!"),(O<0||void 0===O||0===O.length)&&e.push("Price should be a positive value!"),q(e),!(e.length>0)};return Object(G.jsx)("div",{children:Object(G.jsxs)("form",{className:"form__addEditContainer",children:[Object(G.jsxs)("h1",{className:"form_addEditTitle",children:[" ",!0===e.addRoom?"Add room":"Edit room"," "]}),Object(G.jsxs)("div",{className:"form__addEditInputs",children:[Object(G.jsx)("p",{className:"form__p",children:" Room number "}),void 0===o?Object(G.jsx)("input",{type:"number",className:"form_inputs",name:"roomNumber",onChange:function(e){return i(e.target.value)}}):Object(G.jsx)("input",{type:"number",className:"form_inputs",name:"roomNumber",onChange:function(e){return i(e.target.value)},value:a}),Object(G.jsx)("p",{className:"form__p",children:" Number of beds "}),void 0===o?Object(G.jsx)("input",{type:"number",className:"form_inputs",name:"numberOfBeds",onChange:function(e){return m(e.target.value)}}):Object(G.jsx)("input",{type:"number",className:"form_inputs",name:"numberOfBeds",onChange:function(e){return m(e.target.value)},value:l}),Object(G.jsx)("p",{className:"form__p",children:" Price "}),void 0===o?Object(G.jsx)("input",{type:"number",className:"form_inputs",name:"price",onChange:function(e){return p(e.target.value)}}):Object(G.jsx)("input",{type:"number",className:"form_inputs",name:"price",onChange:function(e){return p(e.target.value)},value:O}),void 0===o?Object(G.jsx)(re.Multiselect,{options:E,displayValue:"name",onSelect:w,onRemove:P,className:"form__multiselect"}):Object(G.jsx)(re.Multiselect,{options:E,displayValue:"name",onSelect:w,onRemove:P,className:"form__multiselect",selectedValues:R}),void 0===o?Object(G.jsx)("button",{className:"form__addEditRoomButton",type:"button",onClick:function(){k()&&(t(e.store.onRequestAddRoom({roomNumber:a,beds:l,price:O},R)),n.push("/admin/rooms"))},children:" Add room"}):Object(G.jsx)("button",{className:"form__addEditRoomButton",type:"button",onClick:function(){return function(){if(k()){var e=[];Object.keys(R.map((function(t,n){return e.push(t.name.toUpperCase())}))),fetch(D.rooms+"/".concat(o),{method:"PUT",body:JSON.stringify({number:a,beds:l,facilities:{wifi:e.indexOf("WIFI")>-1,ac:e.indexOf("AC")>-1,tv:e.indexOf("TV")>-1,nsr:e.indexOf("NSR")>-1},reserved:g,price:O}),headers:{"Content-Type":"application/json "}}).then((function(e){return t({type:"UPDATE_TABLE_TRUE"}),e.json()}))}t({type:"UPDATE_TABLE_FALSE"}),n.push("/admin/rooms")}()},children:" Edit room"}),U?Object(G.jsxs)("div",{className:"form_displayErrorsDiv",children:[" ",U.map((function(e,t){return Object(G.jsxs)("p",{className:"from__pDisplayErrors",children:[" ",e," "]},t)}))," "]}):""]})]})})},ae=function(e){return Object(G.jsx)("div",{children:Object(G.jsx)(J,{store:e.store,reserved:!0})})},ie=(n(65),function(){var e=Object(d.useState)(),t=Object(B.a)(e,2),n=t[0],o=t[1],r=Object(d.useState)(),s=Object(B.a)(r,2),a=s[0],i=s[1],c=Object(d.useState)([]),u=Object(B.a)(c,2),l=u[0],m=u[1],j=Object(I.f)(),b=function(){(function(){var e=[];return(n<0||void 0===n||0===n.length)&&e.push("Subject is required!"),(a<0||void 0===a||0===a.length)&&e.push("Body is required!"),m(e),!(e.length>0)})()&&(fetch(D.sendEmail,{method:"POST",body:JSON.stringify({subject:n,body:a}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("User_Login_Token")}}),alert("A promotional email has been sent!"),j.push("/admin/rooms"))};return Object(G.jsx)("div",{children:Object(G.jsxs)("form",{className:"form__sendEmailContainer",children:[Object(G.jsx)("h1",{className:"form_sendEmailTitle",children:" Send "}),Object(G.jsx)("h1",{className:"form_sendEmailTitle",children:" promotional email "}),Object(G.jsxs)("div",{className:"form__sendEmailInputs",children:[Object(G.jsx)("p",{className:"form__p",children:" Email subject "}),Object(G.jsx)("input",{type:"text",className:"form_SendEmailInputs",name:"emailSubject",onChange:function(e){return o(e.target.value)}}),Object(G.jsx)("p",{className:"form__p",children:" Email body "}),Object(G.jsx)("textarea",{className:"form_SendEmailInputs",name:"emailBody",onChange:function(e){return i(e.target.value)}}),Object(G.jsx)("button",{className:"form__sendEmailRoomButton",type:"button",onClick:function(){return b()},children:" Send"}),l?Object(G.jsxs)("div",{className:"form_SendEmailErrorsDiv",children:[" ",l.map((function(e,t){return Object(G.jsxs)("p",{className:"from__pSendEmailErrors",children:[" ",e," "]},t)}))," "]}):""]})]})})}),ce=function(e){return Object(G.jsx)(C.a,{children:Object(G.jsxs)("div",{className:"main",children:[localStorage.getItem("User_Login_Token")?Object(G.jsx)(oe,{store:e.store}):"",Object(G.jsx)(I.b,{path:"/",exact:!0,render:function(){return Object(G.jsx)(I.a,{to:"/admin/rooms"})}}),Object(G.jsx)(I.b,{path:"/login",render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(I.a,{to:"/admin/rooms"}):Object(G.jsx)(F,{store:e.store})}}),Object(G.jsx)(I.b,{path:"/admin/rooms",exact:!0,render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(V,{store:e.store}):Object(G.jsx)(I.a,{to:"/login"})}}),Object(G.jsx)(I.b,{path:"/admin/rooms/add",exact:!0,render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(se,{store:e.store,addRoom:!0}):Object(G.jsx)(I.a,{to:"/login"})}}),Object(G.jsx)(I.b,{path:"/admin/rooms/edit/:id",render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(se,{store:e.store,addRoom:!1}):Object(G.jsx)(I.a,{to:"/login"})}}),Object(G.jsx)(I.b,{path:"/admin/reservations",render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(ae,{store:e.store}):Object(G.jsx)(I.a,{to:"/login"})}}),Object(G.jsx)(I.b,{path:"/admin/sendemail",render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(ie,{store:e.store}):Object(G.jsx)(I.a,{to:"/login"})}})]})})};var de=Object(A.b)((function(e){return{requestLogin:e.requestLogin,requestRooms:e.requestRooms,requestAddRoom:e.requestAddRoom,requestDeleteRoom:e.requestDeleteRoom,requestGetRoom:e.requestGetRoom,updateTable:e.updateTable}}),(function(e){return{onRequestLogin:function(e){return function(e){return function(t){t({type:m}),fetch(D.authentificate,{method:"POST",body:JSON.stringify({email:e.email,password:e.password}),headers:{"Content-Type":"application/json"}}).then(q).then((function(e){t({type:j,payload:e})})).catch((function(e){return t({type:b,payload:e})}))}}(e)},onRequestLogout:function(){return function(e){e({type:O})}},onRequestRooms:function(){return function(e){e({type:p}),fetch(D.rooms,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("User_Login_Token")}}).then(q).then((function(t){e({type:f,payload:t})})).catch((function(t){return e({type:h,payload:t})}))}},onRequestAddRoom:function(e,t){return function(e,t){return function(n){n({type:g});var o=[];Object.keys(t.map((function(e,t){return o.push(e.name)}))),fetch(D.rooms,{method:"POST",body:JSON.stringify({number:e.roomNumber,beds:e.beds,facilities:{wifi:o.indexOf("WIFI")>-1,ac:o.indexOf("AC")>-1,tv:o.indexOf("TV")>-1,nsr:o.indexOf("NSR")>-1},reserved:!1,price:e.price}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("User_Login_Token")}}).then((function(e){n({type:x,payload:e}),n({type:N})})).catch((function(e){return n({type:_,payload:e})})),n({type:L})}}(e,t)},onRequestDeleteRoom:function(e){return function(e){return function(t){t({type:v}),fetch(D.rooms+"/".concat(e),{method:"DELETE"}).then((function(e){t({type:E,payload:e}),t({type:N})})).catch((function(e){return t({type:y,payload:e})})),t({type:L})}}(e)},onRequestGetRoom:function(e){return function(e){return function(t){t({type:S}),fetch(D.rooms+"/".concat(e),{method:"GET"}).then((function(e){return e.json()})).then((function(e){t({type:R,payload:e})})).then((function(e){return t({type:T,payload:e})}))}}(e)}}}))((function(e){return Object(G.jsx)("div",{className:"App",children:Object(G.jsx)(ce,{store:e})})})),ue=n(15),le={isLoggingin:!1,loginToken:[],error:""},me={isPending:!1,rooms:[],error:""},je={isPendingAdd:!1,roomToAdd:[],error:""},be={isPendingDeleteRoom:!1,successMessage:"",error:""},Oe={isPendingGetRoom:!1,room:[],error:""},pe={updateTable:!1},fe=Object(ue.c)({requestLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m:return Object.assign({},e,{isLoggingin:!0});case j:return localStorage.setItem("User_Login_Token",t.payload.token),Object.assign({},e,{error:"",loginToken:t.payload,isLoggingin:!1});case b:return Object.assign({},e,{error:"User or password incorect. Please contact support if you forgot your account!",isLoggingin:!1});case O:return Object.assign({},e,{loginToken:[],isLoggingin:!1});default:return e}},requestRooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p:return Object.assign({},e,{isPending:!0});case f:return Object.assign({},e,{rooms:t.payload,isPending:!1});case h:return Object.assign({},{error:t.payload,isPending:!1});default:return e}},requestAddRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:return Object.assign({},e,{isPending:!0});case x:return Object.assign({},e,{roomToAdd:t.payload,isPending:!1});case _:return Object.assign({},e,{error:t.payload,isPending:!1});default:return e}},requestDeleteRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case v:return Object.assign({},e,{isPendingDeleteRoom:!0});case E:return Object.assign({},e,{successMessage:t.payload,isPendingDeleteRoom:!1});case y:return Object.assign({},e,{error:t.payload,isPendingDeleteRoom:!1});default:return e}},requestGetRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case S:return Object.assign({},e,{isPendingGetRoom:!0});case R:return Object.assign({},e,{room:t.payload,isPendingGetRoom:!1});case T:return Object.assign({},e,{error:t.payload,isPendingGetRoom:!1});default:return e}},updateTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case N:return Object.assign({},e,{updateTable:!0});case L:return Object.assign({},e,{updateTable:!1});default:return e}}}),he=n(40),ge=n(41),xe=Object(ge.createLogger)(),_e=Object(ue.d)(fe,Object(ue.a)(he.a,xe));l.a.render(Object(G.jsx)(A.a,{store:_e,children:Object(G.jsx)(de,{})}),document.getElementById("root"));t.default=_e}},[[66,1,2]]]);
//# sourceMappingURL=main.18cba659.chunk.js.map