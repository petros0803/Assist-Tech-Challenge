(this.webpackJsonpmy_hotel=this.webpackJsonpmy_hotel||[]).push([[0],{47:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var o,r,s,a,c,i,d=n(1),u=n(23),l=n.n(u),j=(n(47),"REQUEST_LOGIN_PENDING"),m="REQUEST_LOGIN_SUCCESS",b="REQUEST_LOGIN_FAILED",O="REQUEST_LOGOUT",p="REQUEST_ROOMS_PENDING",f="REQUEST_ROOMS_SUCCESS",h="REQUEST_ROOMS_FAILED",g="REQUEST_ADDROOMS_PENDING",x="REQUEST_ADDROOMS_SUCCESS",_="REQUEST_ADDROOMS_FAILED",v="REQUEST_DELETEROOMS_PENDING",E="REQUEST_DELETEROOMS_SUCCESS",y="REQUEST_DELETEROOMS_FAILED",R="REQUEST_GETROOMS_PENDING",S="REQUEST_GETROOMS_SUCCESS",T="REQUEST_GETROOMS_FAILED",N="UPDATE_TABLE_TRUE",L="UPDATE_TABLE_FALSE",U="https://hotelautomationapi20210407223324.azurewebsites.net/api",D={base:"local",authentificate:U+"/Users/authenticate",rooms:U+"/rooms"},q=function(e){if(!e.ok)throw Error("Resposnse failed!");return e.json()},w=n(8),P=n(12),A=n(4),C=n(29),I=n(27),k=n(42),G=(n(53),n(54),n(2)),M=function(e){var t=Object(I.a)(),n=t.register,o=t.handleSubmit,r=t.formState.errors,s=Object(w.c)();return Object(G.jsx)("div",{children:Object(G.jsxs)("form",{className:"form-container",onSubmit:o((function(t){s(e.store.onRequestLogin(t))})),children:[Object(G.jsx)("h1",{className:"form__logintitle",children:"Login"}),Object(G.jsxs)("div",{className:"form__inputs",children:[Object(G.jsx)("input",Object(C.a)({type:"text",placeholder:"Email",name:"email"},n("email",{required:{value:!0,message:"Email is required!"},pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,message:"Email is invalid!"}}))),r.email&&Object(G.jsxs)("span",{children:[" ",r.email.message," "]}),Object(G.jsx)("input",Object(C.a)({type:"password",name:"password",placeholder:"Password"},n("password",{required:{value:!0,message:"Password is required!"},minLength:{value:6,message:"Password must be at least 6 characters long!"}}))),r.password&&Object(G.jsxs)("span",{children:[" ",r.password.message," "]})]}),Object(G.jsxs)("div",{children:[console.log(e.store.requestLogin.error),""!==e.store.requestLogin.error&&Object(G.jsx)("span",{className:"form__loginRequestError",children:e.store.requestLogin.error}),!0===e.store.requestLogin.isLoggingin&&Object(G.jsx)(k.a,{animation:"border",role:"status",varian:"danger",className:"form_loginSpinner"}),Object(G.jsx)("input",{type:"submit",className:"form__loginbutton",value:"Login"})]})]})})},Q=(n(56),n(5)),F=(n(57),n(32)),B=function(e){var t,n,o=Object(d.useState)([]),r=Object(Q.a)(o,2),s=r[0],a=r[1],c=Object(w.c)(),i=Object(d.useState)(0),u=Object(Q.a)(i,2),l=u[0],j=u[1];Object(d.useEffect)((function(){!function(){var t=[];Object.keys(e.room.facilities).map((function(n,o){return e.room.facilities[n]?t.push(n):""})),a(t)}()}),[e.store.updateTable.updateTable]);var m=Object(A.f)();return Object(G.jsxs)("tr",{className:"table__roomDataRow",children:[Object(G.jsx)("td",{children:e.room.number}),Object(G.jsx)("td",{children:s.map((function(e,t){return e+" "}))}),Object(G.jsx)("td",{children:e.room.beds}),Object(G.jsx)("td",{children:e.room.price}),Object(G.jsx)("td",{children:String(e.room.reserved)}),Object(G.jsx)("td",{children:null===(t=e.room.startDate)||void 0===t?void 0:t.substr(0,10)}),Object(G.jsx)("td",{children:null===(n=e.room.expirationDate)||void 0===n?void 0:n.substr(0,10)}),Object(G.jsx)("td",{children:Object(G.jsx)(F.b,{onClick:function(){return t=e.room.id,void m.push("/admin/rooms/edit/".concat(t));var t}})}),Object(G.jsx)("td",{children:Object(G.jsx)(F.a,{onClick:function(){return t=e.room.id,c(e.store.onRequestDeleteRoom(t)),alert("Room deleted!"),void j(l+1);var t}})})]})},V=(n(59),function(e){var t=Object(w.c)(),n=Object(A.f)();Object(d.useEffect)((function(){t(e.store.onRequestRooms())}),[e.store.updateTable.updateTable]);var o=Object(d.useState)(""),r=Object(Q.a)(o,2),s=r[0],a=r[1],c=e.store.requestRooms.rooms.filter((function(e){return e.number.includes(s)}));return console.log(c),Object(G.jsx)("div",{children:Object(G.jsxs)("table",{className:"table__container",children:[Object(G.jsxs)("thead",{children:[Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{colSpan:4,className:"table__header__td_search",children:Object(G.jsx)("input",{type:"search",placeholder:"search",className:"table__header__search",onChange:function(e){return a(e.target.value)}})}),Object(G.jsx)("td",{colSpan:5,className:"table__header__td_button",children:Object(G.jsx)("button",{className:"table__header__button",onClick:function(){n.push("/admin/rooms/add")},children:" Add room "})})]}),Object(G.jsxs)("tr",{className:"table__header",children:[Object(G.jsx)("th",{children:"Room number"}),Object(G.jsx)("th",{children:"Facilities"}),Object(G.jsx)("th",{children:"Beds"}),Object(G.jsx)("th",{children:"Price/day"}),Object(G.jsx)("th",{children:"Reserved"}),Object(G.jsx)("th",{children:"From date"}),Object(G.jsx)("th",{children:"To date"}),Object(G.jsx)("th",{colSpan:2,children:"Update and delete"})]})]}),Object(G.jsx)("tbody",{children:!1===e.reserved?c.map((function(t,n){return Object(G.jsx)(B,{room:t,store:e.store},n)})):c.map((function(t,n){return!0===t.reserved?Object(G.jsx)(B,{room:t,store:e.store},n):console.log(t.reserved)}))})]})})}),J=function(e){return Object(G.jsx)("div",{className:"rooms_continer",children:Object(G.jsx)(V,{store:e.store,reserved:!1})})},z=(n(60),n(17)),W=n(26),$=n(18),H=$.a.nav(o||(o=Object(z.a)(["\n  background: #000;\n  height: 80px;\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem calc((85vw - 1000px) / 2);\n  z-index: 10;\n"]))),K=Object($.a)(P.b)(r||(r=Object(z.a)(["\n  color: #fff;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n  &.active {\n    color: #15cdfc;\n  }\n"]))),X=Object($.a)(W.a)(s||(s=Object(z.a)(["\n  display: none;\n  color: #fff;\n  @media screen and (max-width: 768px) {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(-100%, 75%);\n    font-size: 1.8rem;\n    cursor: pointer;\n  }\n"]))),Y=$.a.div(a||(a=Object(z.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: -24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),Z=$.a.nav(c||(c=Object(z.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: 24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),ee=Object($.a)(P.b)(i||(i=Object(z.a)(["\n  border-radius: 4px;\n  background: #256ce1;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n \n  margin-left: 24px;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #fff;\n    color: #010606;\n  }\n"]))),te=n.p+"static/media/logo.bc8abf65.svg",ne=function(e){var t=Object(w.c)();return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(H,{children:[Object(G.jsx)(K,{to:"/admin/rooms",children:Object(G.jsx)("img",{src:te,alt:"logo"})}),Object(G.jsx)(X,{}),Object(G.jsxs)(Y,{children:[Object(G.jsx)(K,{to:"/admin/rooms",children:"Rooms"}),Object(G.jsx)(K,{to:"/admin/reservations",children:"Reservations"})]}),Object(G.jsx)(Z,{children:Object(G.jsx)(ee,{to:"/login",onClick:function(){return localStorage.removeItem("User_Login_Token"),void t(e.store.onRequestLogout())},children:"Log out"})})]})})},oe=(n(62),n(33)),re=function(e){var t=Object(w.c)(),n=Object(A.f)(),o=Object(A.g)().id,r=Object(d.useState)(),s=Object(Q.a)(r,2),a=s[0],c=s[1],i=Object(d.useState)(),u=Object(Q.a)(i,2),l=u[0],j=u[1],m=Object(d.useState)(),b=Object(Q.a)(m,2),O=b[0],p=b[1],f=Object(d.useState)(),h=Object(Q.a)(f,2),g=h[0],x=h[1],_=Object(d.useState)([{name:"WIFI",id:1},{name:"AC",id:2},{name:"TV",id:3},{name:"NSR",id:4}]),v=Object(Q.a)(_,2),E=v[0],y=(v[1],Object(d.useState)([])),R=Object(Q.a)(y,2),S=R[0],T=R[1],N=Object(d.useState)([]),L=Object(Q.a)(N,2),U=L[0],q=L[1],P=function(e){switch(e){case"wifi":return 1;case"ac":return 2;case"tv":return 3;case"nsr":return 4}};Object(d.useEffect)((function(){void 0!==o&&fetch(D.rooms+"/".concat(o),{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=Object.entries(e.facilities).filter((function(e){return!0===e[1]})).map((function(e){if(!0===e[1])return{name:e[0],id:P(e[0])}}));c(e.number),j(e.beds),p(e.price),T(t),x(e.reserved)}))}),[]);var C=function(e){T(e)},I=function(e){T(e)},k=function(){var e=[];return(a<0||a>999||void 0===a||0===a.length)&&e.push("Room number should be between 0 and 999!"),(l<0||l>5||void 0===l||0===l.length)&&e.push("Number of beds should be between 0 and 5!"),(O<0||void 0===O||0===O.length)&&e.push("Price should be a positive value!"),q(e),!(e.length>0)};return Object(G.jsx)("div",{children:Object(G.jsxs)("form",{className:"form__addEditContainer",children:[Object(G.jsxs)("h1",{className:"form_addEditTitle",children:[" ",!0===e.addRoom?"Add room":"Edit room"," "]}),Object(G.jsxs)("div",{className:"form__addEditInputs",children:[Object(G.jsx)("p",{className:"form__p",children:" Room number "}),void 0===o?Object(G.jsx)("input",{type:"number",className:"from__inputs",name:"roomNumber",onChange:function(e){return c(e.target.value)}}):Object(G.jsx)("input",{type:"number",className:"from__inputs",name:"roomNumber",onChange:function(e){return c(e.target.value)},value:a}),Object(G.jsx)("p",{className:"form__p",children:" Number of beds "}),void 0===o?Object(G.jsx)("input",{type:"number",className:"from__inputs",name:"numberOfBeds",onChange:function(e){return j(e.target.value)}}):Object(G.jsx)("input",{type:"number",className:"from__inputs",name:"numberOfBeds",onChange:function(e){return j(e.target.value)},value:l}),Object(G.jsx)("p",{className:"form__p",children:" Price "}),void 0===o?Object(G.jsx)("input",{type:"number",className:"from__inputs",name:"price",onChange:function(e){return p(e.target.value)}}):Object(G.jsx)("input",{type:"number",className:"from__inputs",name:"price",onChange:function(e){return p(e.target.value)},value:O}),void 0===o?Object(G.jsx)(oe.Multiselect,{options:E,displayValue:"name",onSelect:C,onRemove:I,className:"form__multiselect"}):Object(G.jsx)(oe.Multiselect,{options:E,displayValue:"name",onSelect:C,onRemove:I,className:"form__multiselect",selectedValues:S}),void 0===o?Object(G.jsx)("button",{className:"form__addEditRoomButton",type:"button",onClick:function(){k()&&(t(e.store.onRequestAddRoom({roomNumber:a,beds:l,price:O},S)),n.push("/admin/rooms"))},children:" Add room"}):Object(G.jsx)("button",{className:"form__addEditRoomButton",type:"button",onClick:function(){return function(){if(k()){var e=[];Object.keys(S.map((function(t,n){return e.push(t.name.toUpperCase())}))),fetch(D.rooms+"/".concat(o),{method:"PUT",body:JSON.stringify({number:a,beds:l,facilities:{wifi:e.indexOf("WIFI")>-1,ac:e.indexOf("AC")>-1,tv:e.indexOf("TV")>-1,nsr:e.indexOf("NSR")>-1},reserved:g,price:O}),headers:{"Content-Type":"application/json "}}).then((function(e){return e.json()})).then(t({type:"UPDATE_TABLE_TRUE"}))}t({type:"UPDATE_TABLE_FALSE"}),n.push("/admin/rooms")}()},children:" Edit room"}),U?Object(G.jsxs)("div",{className:"form_displayErrorsDiv",children:[" ",U.map((function(e,t){return Object(G.jsxs)("p",{className:"from__pDisplayErrors",children:[" ",e," "]},t)}))," "]}):""]})]})})},se=function(e){return Object(G.jsx)("div",{children:Object(G.jsx)(V,{store:e.store,reserved:!0})})},ae=function(e){return Object(G.jsx)(P.a,{children:Object(G.jsxs)("div",{className:"main",children:[localStorage.getItem("User_Login_Token")?Object(G.jsx)(ne,{store:e.store}):"",Object(G.jsx)(A.b,{path:"/",exact:!0,render:function(){return Object(G.jsx)(A.a,{to:"/admin/rooms"})}}),Object(G.jsx)(A.b,{path:"/login",render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(A.a,{to:"/admin/rooms"}):Object(G.jsx)(M,{store:e.store})}}),Object(G.jsx)(A.b,{path:"/admin/rooms",exact:!0,render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(J,{store:e.store}):Object(G.jsx)(A.a,{to:"/login"})}}),Object(G.jsx)(A.b,{path:"/admin/rooms/add",exact:!0,render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(re,{store:e.store,addRoom:!0}):Object(G.jsx)(A.a,{to:"/login"})}}),Object(G.jsx)(A.b,{path:"/admin/rooms/edit/:id",render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(re,{store:e.store,addRoom:!1}):Object(G.jsx)(A.a,{to:"/login"})}}),Object(G.jsx)(A.b,{path:"/admin/reservations",render:function(){return localStorage.getItem("User_Login_Token")?Object(G.jsx)(se,{store:e.store}):Object(G.jsx)(A.a,{to:"/login"})}})]})})};var ce=Object(w.b)((function(e){return{requestLogin:e.requestLogin,requestRooms:e.requestRooms,requestAddRoom:e.requestAddRoom,requestDeleteRoom:e.requestDeleteRoom,requestGetRoom:e.requestGetRoom,updateTable:e.updateTable}}),(function(e){return{onRequestLogin:function(e){return function(e){return function(t){t({type:j}),fetch(D.authentificate,{method:"POST",body:JSON.stringify({email:e.email,password:e.password}),headers:{"Content-Type":"application/json"}}).then(q).then((function(e){t({type:m,payload:e})})).catch((function(e){return t({type:b,payload:e})}))}}(e)},onRequestLogout:function(){return function(e){e({type:O})}},onRequestRooms:function(){return function(e){e({type:p}),fetch(D.rooms,{method:"GET"}).then(q).then((function(t){e({type:f,payload:t})})).catch((function(t){return e({type:h,payload:t})}))}},onRequestAddRoom:function(e,t){return function(e,t){return function(n){n({type:g});var o=[];Object.keys(t.map((function(e,t){return o.push(e.name)}))),fetch(D.rooms,{method:"POST",body:JSON.stringify({number:e.roomNumber,beds:e.beds,facilities:{wifi:o.indexOf("WIFI")>-1,ac:o.indexOf("AC")>-1,tv:o.indexOf("TV")>-1,nsr:o.indexOf("NSR")>-1},reserved:!1,price:e.price}),headers:{"Content-Type":"application/json"}}).then((function(e){n({type:x,payload:e}),n({type:N})})).catch((function(e){return n({type:_,payload:e})})),n({type:L})}}(e,t)},onRequestDeleteRoom:function(e){return function(e){return function(t){t({type:v}),fetch(D.rooms+"/".concat(e),{method:"DELETE"}).then((function(e){t({type:E,payload:e}),t({type:N})})).catch((function(e){return t({type:y,payload:e})})),t({type:L})}}(e)},onRequestGetRoom:function(e){return function(e){return function(t){t({type:R}),fetch(D.rooms+"/".concat(e),{method:"GET"}).then((function(e){return e.json()})).then((function(e){t({type:S,payload:e})})).then((function(e){return t({type:T,payload:e})}))}}(e)}}}))((function(e){return Object(G.jsx)("div",{className:"App",children:Object(G.jsx)(ae,{store:e})})})),ie=n(15),de={isLoggingin:!1,loginToken:[],error:""},ue={isPending:!1,rooms:[],error:""},le={isPendingAdd:!1,roomToAdd:[],error:""},je={isPendingDeleteRoom:!1,successMessage:"",error:""},me={isPendingGetRoom:!1,room:[],error:""},be={updateTable:!1},Oe=Object(ie.c)({requestLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case j:return Object.assign({},e,{isLoggingin:!0});case m:return localStorage.setItem("User_Login_Token",t.payload.token),Object.assign({},e,{error:"",loginToken:t.payload,isLoggingin:!1});case b:return Object.assign({},e,{error:"User or password incorect. Please contact support if you forgot your account!",isLoggingin:!1});case O:return Object.assign({},e,{loginToken:[],isLoggingin:!1});default:return e}},requestRooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p:return Object.assign({},e,{isPending:!0});case f:return Object.assign({},e,{rooms:t.payload,isPending:!1});case h:return Object.assign({},{error:t.payload,isPending:!1});default:return e}},requestAddRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:return Object.assign({},e,{isPending:!0});case x:return Object.assign({},e,{roomToAdd:t.payload,isPending:!1});case _:return Object.assign({},e,{error:t.payload,isPending:!1});default:return e}},requestDeleteRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case v:return Object.assign({},e,{isPendingDeleteRoom:!0});case E:return Object.assign({},e,{successMessage:t.payload,isPendingDeleteRoom:!1});case y:return Object.assign({},e,{error:t.payload,isPendingDeleteRoom:!1});default:return e}},requestGetRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case R:return Object.assign({},e,{isPendingGetRoom:!0});case S:return Object.assign({},e,{room:t.payload,isPendingGetRoom:!1});case T:return Object.assign({},e,{error:t.payload,isPendingGetRoom:!1});default:return e}},updateTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case N:return Object.assign({},e,{updateTable:!0});case L:return Object.assign({},e,{updateTable:!1});default:return e}}}),pe=n(40),fe=n(41),he=Object(fe.createLogger)(),ge=Object(ie.d)(Oe,Object(ie.a)(pe.a,he));l.a.render(Object(G.jsx)(w.a,{store:ge,children:Object(G.jsx)(ce,{})}),document.getElementById("root"));t.default=ge}},[[65,1,2]]]);
//# sourceMappingURL=main.399f557e.chunk.js.map