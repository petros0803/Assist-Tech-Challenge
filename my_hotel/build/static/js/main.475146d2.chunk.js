(this.webpackJsonpmy_hotel=this.webpackJsonpmy_hotel||[]).push([[0],{47:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var o,r,s,i,c,a,d=n(1),u=n(23),l=n.n(u),m=(n(47),"REQUEST_LOGIN_PENDING"),j="REQUEST_LOGIN_SUCCESS",b="REQUEST_LOGIN_FAILED",O="REQUEST_LOGOUT",f="REQUEST_ROOMS_PENDING",p="REQUEST_ROOMS_SUCCESS",h="REQUEST_ROOMS_FAILED",g="REQUEST_ADDROOMS_PENDING",x="REQUEST_ADDROOMS_SUCCESS",_="REQUEST_ADDROOMS_FAILED",v="REQUEST_DELETEROOMS_PENDING",R="REQUEST_DELETEROOMS_SUCCESS",y="REQUEST_DELETEROOMS_FAILED",E="REQUEST_GETROOMS_PENDING",S="REQUEST_GETROOMS_SUCCESS",N="REQUEST_GETROOMS_FAILED",T="https://hotelautomationapi20210407223324.azurewebsites.net/api",L={base:"local",authentificate:T+"/Users/authenticate",rooms:T+"/rooms"},q=function(e){if(!e.ok)throw Error("Resposnse failed!");return e.json()},D=n(8),w=n(12),U=n(4),P=n(29),C=n(27),I=n(42),k=(n(53),n(54),n(2)),A=function(e){var t=Object(C.a)(),n=t.register,o=t.handleSubmit,r=t.formState.errors,s=Object(D.c)();return Object(k.jsx)("div",{children:Object(k.jsxs)("form",{className:"form-container",onSubmit:o((function(t){s(e.store.onRequestLogin(t))})),children:[Object(k.jsx)("h1",{className:"form__logintitle",children:"Login"}),Object(k.jsxs)("div",{className:"form__inputs",children:[Object(k.jsx)("input",Object(P.a)({type:"text",placeholder:"Email",name:"email"},n("email",{required:{value:!0,message:"Email is required!"},pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,message:"Email is invalid!"}}))),r.email&&Object(k.jsxs)("span",{children:[" ",r.email.message," "]}),Object(k.jsx)("input",Object(P.a)({type:"password",name:"password",placeholder:"Password"},n("password",{required:{value:!0,message:"Password is required!"},minLength:{value:6,message:"Password must be at least 6 characters long!"}}))),r.password&&Object(k.jsxs)("span",{children:[" ",r.password.message," "]})]}),Object(k.jsxs)("div",{children:[console.log(e.store.requestLogin.error),""!==e.store.requestLogin.error&&Object(k.jsx)("span",{className:"form__loginRequestError",children:e.store.requestLogin.error}),!0===e.store.requestLogin.isLoggingin&&Object(k.jsx)(I.a,{animation:"border",role:"status",varian:"danger",className:"form_loginSpinner"}),Object(k.jsx)("input",{type:"submit",className:"form__loginbutton",value:"Login"})]})]})})},G=(n(56),n(5)),M=(n(57),n(32)),Q=function(e){var t,n,o=Object(d.useState)([]),r=Object(G.a)(o,2),s=r[0],i=r[1],c=Object(D.c)(),a=Object(d.useState)(0),u=Object(G.a)(a,2),l=u[0],m=u[1];Object(d.useEffect)((function(){!function(){var t=[];Object.keys(e.room.facilities).map((function(n,o){return e.room.facilities[n]?t.push(n):""})),i(t)}()}),[l]);var j=Object(U.f)();return Object(k.jsxs)("tr",{className:"table__roomDataRow",children:[Object(k.jsx)("td",{children:e.room.number}),Object(k.jsx)("td",{children:s.map((function(e,t){return e+" "}))}),Object(k.jsx)("td",{children:e.room.beds}),Object(k.jsx)("td",{children:e.room.price}),Object(k.jsx)("td",{children:String(e.room.reserved)}),Object(k.jsx)("td",{children:null===(t=e.room.startDate)||void 0===t?void 0:t.substr(0,10)}),Object(k.jsx)("td",{children:null===(n=e.room.expirationDate)||void 0===n?void 0:n.substr(0,10)}),Object(k.jsx)("td",{children:Object(k.jsx)(M.b,{onClick:function(){return t=e.room.id,void j.push("/admin/rooms/edit/".concat(t));var t}})}),Object(k.jsx)("td",{children:Object(k.jsx)(M.a,{onClick:function(){return t=e.room.id,c(e.store.onRequestDeleteRoom(t)),alert("Room deleted!"),void m(l+1);var t}})})]})},F=(n(59),function(e){var t=Object(U.f)();return Object(k.jsx)("div",{children:Object(k.jsxs)("table",{className:"table__container",children:[Object(k.jsxs)("thead",{children:[Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{colSpan:4,className:"table__header__td_search",children:Object(k.jsx)("input",{type:"search",placeholder:"search",className:"table__header__search"})}),Object(k.jsx)("td",{colSpan:5,className:"table__header__td_button",children:Object(k.jsx)("button",{className:"table__header__button",onClick:function(){t.push("/admin/rooms/add")},children:" Add room "})})]}),Object(k.jsxs)("tr",{className:"table__header",children:[Object(k.jsx)("th",{children:"Room number"}),Object(k.jsx)("th",{children:"Facilities"}),Object(k.jsx)("th",{children:"Beds"}),Object(k.jsx)("th",{children:"Price/day"}),Object(k.jsx)("th",{children:"Reserved"}),Object(k.jsx)("th",{children:"From date"}),Object(k.jsx)("th",{children:"To date"}),Object(k.jsx)("th",{colSpan:2,children:"Update and delete"})]})]}),Object(k.jsx)("tbody",{children:e.store.requestRooms.rooms.map((function(t,n){return Object(k.jsx)(Q,{room:t,store:e.store},n)}))})]})})}),B=function(e){var t=Object(D.c)();return Object(d.useEffect)((function(){t(e.store.onRequestRooms())}),[e.store.requestDeleteRoom.isPendingDeleteRoom]),Object(k.jsx)("div",{className:"rooms_continer",children:Object(k.jsx)(F,{store:e.store,reserved:!1})})},V=(n(60),n(17)),J=n(26),z=n(18),W=z.a.nav(o||(o=Object(V.a)(["\n  background: #000;\n  height: 80px;\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem calc((85vw - 1000px) / 2);\n  z-index: 10;\n"]))),$=Object(z.a)(w.b)(r||(r=Object(V.a)(["\n  color: #fff;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n  &.active {\n    color: #15cdfc;\n  }\n"]))),H=Object(z.a)(J.a)(s||(s=Object(V.a)(["\n  display: none;\n  color: #fff;\n  @media screen and (max-width: 768px) {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(-100%, 75%);\n    font-size: 1.8rem;\n    cursor: pointer;\n  }\n"]))),K=z.a.div(i||(i=Object(V.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: -24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),X=z.a.nav(c||(c=Object(V.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: 24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),Y=Object(z.a)(w.b)(a||(a=Object(V.a)(["\n  border-radius: 4px;\n  background: #256ce1;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n \n  margin-left: 24px;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #fff;\n    color: #010606;\n  }\n"]))),Z=n.p+"static/media/logo.bc8abf65.svg",ee=function(e){var t=Object(D.c)();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(W,{children:[Object(k.jsx)($,{to:"/admin/rooms",children:Object(k.jsx)("img",{src:Z,alt:"logo"})}),Object(k.jsx)(H,{}),Object(k.jsxs)(K,{children:[Object(k.jsx)($,{to:"/admin/rooms",children:"Rooms"}),Object(k.jsx)($,{to:"/admin/reservations",children:"Reservations"})]}),Object(k.jsx)(X,{children:Object(k.jsx)(Y,{to:"/login",onClick:function(){return localStorage.removeItem("User_Login_Token"),void t(e.store.onRequestLogout())},children:"Log out"})})]})})},te=(n(62),n(33)),ne=function(e){var t=Object(D.c)(),n=Object(U.f)(),o=Object(U.g)().id,r=Object(d.useState)(),s=Object(G.a)(r,2),i=s[0],c=s[1],a=Object(d.useState)(),u=Object(G.a)(a,2),l=u[0],m=u[1],j=Object(d.useState)(),b=Object(G.a)(j,2),O=b[0],f=b[1],p=Object(d.useState)(),h=Object(G.a)(p,2),g=h[0],x=h[1],_=Object(d.useState)([{name:"WIFI",id:1},{name:"AC",id:2},{name:"TV",id:3},{name:"NSR",id:4}]),v=Object(G.a)(_,2),R=v[0],y=(v[1],Object(d.useState)([])),E=Object(G.a)(y,2),S=E[0],N=E[1],T=Object(d.useState)([]),q=Object(G.a)(T,2),w=q[0],P=q[1],C=function(e){switch(e){case"wifi":return 1;case"ac":return 2;case"tv":return 3;case"nsr":return 4}};Object(d.useEffect)((function(){void 0!==o&&fetch(L.rooms+"/".concat(o),{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=Object.entries(e.facilities).filter((function(e){return!0===e[1]})).map((function(e){if(!0===e[1])return{name:e[0],id:C(e[0])}}));c(e.number),m(e.beds),f(e.price),N(t),x(e.reserved)}))}),[]);var I=function(e){N(e)},A=function(e){N(e)},M=function(){var e=[];return(i<0||i>999||void 0===i||0===i.length)&&e.push("Room number should be between 0 and 999!"),(l<0||l>5||void 0===l||0===l.length)&&e.push("Number of beds should be between 0 and 5!"),(O<0||void 0===O||0===O.length)&&e.push("Price should be a positive value!"),P(e),!(e.length>0)};return Object(k.jsx)("div",{children:Object(k.jsxs)("form",{className:"form__addEditContainer",children:[Object(k.jsxs)("h1",{className:"form_addEditTitle",children:[" ",!0===e.addRoom?"Add room":"Edit room"," "]}),Object(k.jsxs)("div",{className:"form__addEditInputs",children:[Object(k.jsx)("p",{className:"form__p",children:" Room number "}),void 0===o?Object(k.jsx)("input",{type:"number",className:"from__inputs",name:"roomNumber",onChange:function(e){return c(e.target.value)}}):Object(k.jsx)("input",{type:"number",className:"from__inputs",name:"roomNumber",onChange:function(e){return c(e.target.value)},value:i}),Object(k.jsx)("p",{className:"form__p",children:" Number of beds "}),void 0===o?Object(k.jsx)("input",{type:"number",className:"from__inputs",name:"numberOfBeds",onChange:function(e){return m(e.target.value)}}):Object(k.jsx)("input",{type:"number",className:"from__inputs",name:"numberOfBeds",onChange:function(e){return m(e.target.value)},value:l}),Object(k.jsx)("p",{className:"form__p",children:" Price "}),void 0===o?Object(k.jsx)("input",{type:"number",className:"from__inputs",name:"price",onChange:function(e){return f(e.target.value)}}):Object(k.jsx)("input",{type:"number",className:"from__inputs",name:"price",onChange:function(e){return f(e.target.value)},value:O}),void 0===o?Object(k.jsx)(te.Multiselect,{options:R,displayValue:"name",onSelect:I,onRemove:A,className:"form__multiselect"}):Object(k.jsx)(te.Multiselect,{options:R,displayValue:"name",onSelect:I,onRemove:A,className:"form__multiselect",selectedValues:S}),void 0===o?Object(k.jsx)("button",{className:"form__addEditRoomButton",type:"button",onClick:function(){M()&&(t(e.store.onRequestAddRoom({roomNumber:i,beds:l,price:O},S)),n.push("/admin/rooms"))},children:" Add room"}):Object(k.jsx)("button",{className:"form__addEditRoomButton",type:"button",onClick:function(){return function(){if(M()){console.log(S);var e=[];Object.keys(S.map((function(t,n){return e.push(t.name)}))),fetch(L.rooms+"/".concat(o),{method:"PUT",body:JSON.stringify({number:i,beds:l,facilities:{wifi:e.indexOf("WIFI")>-1,ac:e.indexOf("AC")>-1,tv:e.indexOf("TV")>-1,nsr:e.indexOf("NSR")>-1},reserved:g,price:O}),headers:{"Content-Type":"application/json "}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}n.push("/admin/rooms")}()},children:" Edit room"}),w?Object(k.jsxs)("div",{className:"form_displayErrorsDiv",children:[" ",w.map((function(e,t){return Object(k.jsxs)("p",{className:"from__pDisplayErrors",children:[" ",e," "]},t)}))," "]}):""]})]})})},oe=function(e){return Object(k.jsx)(w.a,{children:Object(k.jsxs)("div",{className:"main",children:[localStorage.getItem("User_Login_Token")?Object(k.jsx)(ee,{store:e.store}):"",Object(k.jsx)(U.b,{path:"/",exact:!0,render:function(){return Object(k.jsx)(U.a,{to:"/admin/rooms"})}}),Object(k.jsx)(U.b,{path:"/login",render:function(){return localStorage.getItem("User_Login_Token")?Object(k.jsx)(U.a,{to:"/admin/rooms"}):Object(k.jsx)(A,{store:e.store})}}),Object(k.jsx)(U.b,{path:"/admin/rooms",exact:!0,render:function(){return localStorage.getItem("User_Login_Token")?Object(k.jsx)(B,{store:e.store}):Object(k.jsx)(U.a,{to:"/login"})}}),Object(k.jsx)(U.b,{path:"/admin/rooms/add",exact:!0,render:function(){return localStorage.getItem("User_Login_Token")?Object(k.jsx)(ne,{store:e.store,addRoom:!0}):Object(k.jsx)(U.a,{to:"/login"})}}),Object(k.jsx)(U.b,{path:"/admin/rooms/edit/:id",render:function(){return localStorage.getItem("User_Login_Token")?Object(k.jsx)(ne,{store:e.store,addRoom:!1}):Object(k.jsx)(U.a,{to:"/login"})}})]})})};var re=Object(D.b)((function(e){return{requestLogin:e.requestLogin,requestRooms:e.requestRooms,requestAddRoom:e.requestAddRoom,requestDeleteRoom:e.requestDeleteRoom,requestGetRoom:e.requestGetRoom}}),(function(e){return{onRequestLogin:function(e){return function(e){return function(t){t({type:m}),fetch(L.authentificate,{method:"POST",body:JSON.stringify({email:e.email,password:e.password}),headers:{"Content-Type":"application/json"}}).then(q).then((function(e){t({type:j,payload:e})})).catch((function(e){return t({type:b,payload:e})}))}}(e)},onRequestLogout:function(){return function(e){e({type:O})}},onRequestRooms:function(){return function(e){e({type:f}),fetch(L.rooms,{method:"GET"}).then(q).then((function(t){e({type:p,payload:t})})).catch((function(t){return e({type:h,payload:t})}))}},onRequestAddRoom:function(e,t){return function(e,t){return function(n){n({type:g});var o=[];Object.keys(t.map((function(e,t){return o.push(e.name)}))),fetch(L.rooms,{method:"POST",body:JSON.stringify({number:e.roomNumber,beds:e.beds,facilities:{wifi:o.indexOf("WIFI")>-1,ac:o.indexOf("AC")>-1,tv:o.indexOf("TV")>-1,nsr:o.indexOf("NSR")>-1},reserved:!1,price:e.price}),headers:{"Content-Type":"application/json"}}).then((function(e){n({type:x,payload:e})})).catch((function(e){return n({type:_,payload:e})}))}}(e,t)},onRequestDeleteRoom:function(e){return function(e){return function(t){t({type:v}),fetch(L.rooms+"/".concat(e),{method:"DELETE"}).then((function(e){t({type:R,payload:e})})).catch((function(e){return t({type:y,payload:e})}))}}(e)},onRequestGetRoom:function(e){return function(e){return function(t){t({type:E}),fetch(L.rooms+"/".concat(e),{method:"GET"}).then((function(e){return e.json()})).then((function(e){t({type:S,payload:e})})).then((function(e){return t({type:N,payload:e})}))}}(e)}}}))((function(e){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(oe,{store:e})})})),se=n(15),ie={isLoggingin:!1,loginToken:[],error:""},ce={isPending:!1,rooms:[],error:""},ae={isPendingAdd:!1,roomToAdd:[],error:""},de={isPendingDeleteRoom:!1,successMessage:"",error:""},ue={isPendingGetRoom:!1,room:[],error:""},le=Object(se.c)({requestLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m:return Object.assign({},e,{isLoggingin:!0});case j:return localStorage.setItem("User_Login_Token",t.payload.token),Object.assign({},e,{error:"",loginToken:t.payload,isLoggingin:!1});case b:return Object.assign({},e,{error:"User or password incorect. Please contact support if you forgot your account!",isLoggingin:!1});case O:return Object.assign({},e,{loginToken:[],isLoggingin:!1});default:return e}},requestRooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f:return Object.assign({},e,{isPending:!0});case p:return Object.assign({},e,{rooms:t.payload,isPending:!1});case h:return Object.assign({},{error:t.payload,isPending:!1});default:return e}},requestAddRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:return Object.assign({},e,{isPending:!0});case x:return Object.assign({},e,{roomToAdd:t.payload,isPending:!1});case _:return Object.assign({},e,{error:t.payload,isPending:!1});default:return e}},requestDeleteRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case v:return Object.assign({},e,{isPendingDeleteRoom:!0});case R:return Object.assign({},e,{successMessage:t.payload,isPendingDeleteRoom:!1});case y:return Object.assign({},e,{error:t.payload,isPendingDeleteRoom:!1});default:return e}},requestGetRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case E:return Object.assign({},e,{isPendingGetRoom:!0});case S:return Object.assign({},e,{room:t.payload,isPendingGetRoom:!1});case N:return Object.assign({},e,{error:t.payload,isPendingGetRoom:!1});default:return e}}}),me=n(40),je=n(41),be=Object(je.createLogger)(),Oe=Object(se.d)(le,Object(se.a)(me.a,be));l.a.render(Object(k.jsx)(D.a,{store:Oe,children:Object(k.jsx)(re,{})}),document.getElementById("root"));t.default=Oe}},[[65,1,2]]]);
//# sourceMappingURL=main.475146d2.chunk.js.map